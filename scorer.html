<!doctype html><html lang="en"><head><meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<meta name="theme-color" content="#2b6cff"/>
<link rel="stylesheet" href="css/theme-light.css"/>
<link rel="stylesheet" href="css/app.css"/>
<title>MPGB Premier League</title>  <link rel="manifest" href="manifest.json"/>
  <link rel="icon" href="favicon.ico" sizes="any">
  <link rel="shortcut icon" href="favicon.ico">
  <meta name="theme-color" content="#2b6cff"/>
  <link rel="apple-touch-icon" href="assets/icons/icon-180.png"/>
  <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32.png"/>
</head><body>
<div class="topbar">
  <div class="inner">
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div>
        <div class="title">MPGB Premier League</div>
        <div class="sub">Cricket Tournament 2025-26</div>
      </div>
    </div>
    <div class="nav">
      <a class="chip" data-nav="home" href="index.html">Home</a>
      <a class="chip" data-nav="schedule" href="schedule.html">Schedule</a>
      <a class="chip" data-nav="points" href="points.html">Points</a>
      <a class="chip" data-nav="stats" href="stats.html">Stats</a>
      <a class="chip" data-nav="teams" href="teams.html">Teams</a>
      <a class="chip" data-nav="venues" href="venues.html">Venues</a>
      <a class="chip" data-nav="rules" href="rules.html">Rules</a>
      <a class="chip" data-nav="admin" href="admin.html">Admin</a>
      <a class="chip on" data-nav="scorer" href="scorer.html">Scorer</a>
    </div>
  </div>
</div>

<div class="container">
  <div class="card">
    <div class="row wrap">
      <div>
        <div class="h1" id="sTitle">Scorer</div>
        <div class="muted small" id="sMeta">Sign-in in Admin first. Then open scorer from Admin links.</div>
      </div>

      <!-- Cricbuzz-style live chip for scorer (who is batting/bowling right now) -->
      <div id="scorerLiveChip" class="card" style="padding:10px; min-width:320px; border:1px solid var(--border)">
        <div class="muted small">Live chip</div>
        <div class="muted small">Loading‚Ä¶</div>
      </div>

      <div class="kpi">
        <button class="btn ok" id="btnStart">Start Match (LIVE)</button>
        <button class="btn danger" id="btnEnd">End Match (COMPLETED)</button>
        <button class="btn ghost" id="btnReset">Reset Match</button>
      </div>
    </div>

    <hr class="sep"/>

    <div class="grid cols2">
      <div class="card scorerPanel">
        <div class="row wrap" style="align-items:flex-end; justify-content:space-between">
          <div>
            <div class="h1" style="font-size:16px">Scoring Pad <span id="freeHitBadge" class="freeHitBadge" style="display:none">FREE HIT</span></div>
            <div class="muted small">Run buttons ek touch me ‚Ä¢ Extras chips ‚Ä¢ Wicket confirm</div>
          </div>
          <button class="btn ghost small" id="undoBall" type="button">‚Ü∂ Undo</button>
        </div>
        <hr class="sep"/>

        <!-- Player selectors (collapsible to reduce scrolling) -->
        <details class="card" style="padding:12px; margin:0 0 10px 0">
          <summary class="muted small" style="cursor:pointer; list-style:none; font-weight:800">Change Striker / Non-striker / Bowler</summary>
          <div class="grid" style="gap:10px; margin-top:10px">
            <div>
              <div class="muted small">Striker</div>
              <select id="batter" class="input">
                <option value="">Select striker‚Ä¶</option>
              </select>
            </div>

            <div>
              <div class="muted small">Non-striker</div>
              <select id="nonStriker" class="input">
                <option value="">Select non-striker‚Ä¶</option>
              </select>
            </div>

            <div>
              <div class="muted small">Bowler</div>
              <select id="bowler" class="input">
                <option value="">Select bowler‚Ä¶</option>
              </select>
            </div>
          </div>
        </details>

        <!-- Runs keypad (premium, no scrolling) -->
        <div class="runGrid">
          <button class="btn ghost runBtn" data-run="0">0</button>
          <button class="btn ghost runBtn" data-run="1">1</button>
          <button class="btn ghost runBtn" data-run="2">2</button>
          <button class="btn ghost runBtn" data-run="3">3</button>
          <button class="btn ghost runBtn four" data-run="4">4</button>
          <button class="btn ghost runBtn six" data-run="6">6</button>
        </div>

        <!-- Extras (chips) -->
        <div class="chipRow" aria-label="Extras">
          <button class="xChip" data-extra="wd" type="button">WD</button>
          <button class="xChip" data-extra="nb" type="button">NB</button>
          <button class="xChip" data-extra="bye" type="button">B</button>
          <button class="xChip" data-extra="lb" type="button">LB</button>
          <button class="xChip" data-wicket="1" type="button" style="border-color:rgba(255,80,90,.45); background:rgba(255,80,90,.10)">Wicket</button>
        </div>
      </div>

      <div class="card">
        <div class="h1" style="font-size:16px">Live preview</div>
        <div class="muted small">Public live view jaisa feel.</div>
        <hr class="sep"/>
        <div id="preview"></div>
      </div>
    </div>
  </div>
</div>

<!-- Wicket Modal (Dropdown based) -->
<div id="wicketModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.65); z-index:9999; padding:16px;">
  <div style="max-width:520px; margin:40px auto; background:var(--card); border:1px solid var(--border); border-radius:14px; padding:14px;">
    <div class="row" style="justify-content:space-between; align-items:center;">
      <div class="h1" style="font-size:16px">Wicket</div>
      <button class="btn ghost small" id="wicketX" type="button">‚úï</button>
    </div>
    <div class="muted small" style="margin-top:4px">
      Out type, out batsman, next batsman aur (agar required) fielder dropdown se select karo.
    </div>
    <hr class="sep"/>

    <div class="grid" style="gap:10px">
      <div>
        <div class="muted small">Out type</div>
        <select id="outType" class="input"></select>
      </div>

      <div class="grid cols2" style="gap:10px">
        <div>
          <div class="muted small">Delivery type</div>
          <select id="wDelivery" class="input">
            <option value="LEGAL">Legal</option>
            <option value="WD">Wide</option>
            <option value="NB">No-ball</option>
          </select>
        </div>
        <div>
          <div class="muted small">Runs on this ball</div>
          <select id="wRuns" class="input">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
          </select>
          <div class="muted small" style="margin-top:4px">(Run-out me runs allow; Wide/NB me total team runs consider honge)</div>
        </div>
      </div>

      <label style="display:flex; gap:8px; align-items:center; margin-top:2px">
        <input type="checkbox" id="wCrossed"/>
        <span class="muted small">Crossed? (Run-out case)</span>
      </label>

      <div>
        <div class="muted small">Out batsman</div>
        <select id="outBatter" class="input"></select>
      </div>

      <div>
        <div class="muted small">Fielder (fielding XI)</div>
        <select id="outFielder" class="input">
          <option value="">Select fielder‚Ä¶</option>
        </select>
        <div class="muted small" style="margin-top:4px">
          (Caught / Run Out / Stumped ‡§Æ‡•á‡§Ç ‡§ú‡§∞‡•Ç‡§∞‡•Ä)
        </div>
      </div>

      <div>
        <div class="muted small">Next batsman</div>
        <select id="nextBatter" class="input">
          <option value="">Select next batter‚Ä¶</option>
        </select>
      </div>

      <div class="muted small" id="wicketMsg" style="color:#ff9a9a"></div>
    </div>

    <div class="row wrap" style="margin-top:12px; gap:10px">
      <button class="btn ghost" id="wicketCancel" type="button">Cancel</button>
      <button class="btn danger" id="wicketSave" type="button">Save Wicket</button>
    </div>
  </div>
</div>

<!-- Bowler Modal (Over-end) -->
<div id="bowlerModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.65); z-index:9998; padding:16px;">
  <div style="max-width:460px; margin:60px auto; background:var(--card); border:1px solid var(--border); border-radius:14px; padding:14px;">
    <div class="row" style="justify-content:space-between; align-items:center;">
      <div class="h1" style="font-size:16px">Next Bowler</div>
      <button class="btn ghost small" id="bowlerX" type="button">‚úï</button>
    </div>
    <div class="muted small" style="margin-top:4px">
      Over complete. Naya bowler select karo (last bowler same over continuous nahi hona chahiye).
    </div>
    <hr class="sep"/>

    <div class="grid" style="gap:10px">
      <div>
        <div class="muted small">Bowler</div>
        <select id="nextBowlerSel" class="input">
          <option value="">Select bowler‚Ä¶</option>
        </select>
        <div class="muted small" id="bowlerModalMsg" style="margin-top:6px; color:#ff9a9a"></div>
      </div>
    </div>

    <div class="row wrap" style="margin-top:12px; gap:10px">
      <button class="btn ghost" id="bowlerCancel" type="button">Cancel</button>
      <button class="btn ok" id="bowlerSave" type="button">Use Bowler</button>
    </div>
  </div>
</div>

<script type="module" src="js/page-scorer.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./sw.js").catch(() => {});
      });
    }
  </script>

<!-- ‚úÖ Scorer Setup Wizard (mobile-first) -->
<div id="setupWizard" class="wiz hidden">
  <div class="wizCard">
    <div class="wizTop">
      <div class="wizTitle" id="wizTitle">Match Setup</div>
      <div class="wizStep" id="wizStep">Step 1/6</div>
    </div>

    <div class="wizBody">
      <section class="wizPane" data-pane="toss">
        <div class="tossBar">
          <div class="tossBarLeft">‚Üê</div>
          <div class="tossBarTitle">Toss</div>
          <div class="tossBarRight">üì∑</div>
        </div>

        <div class="tossBody">
          <div class="tossQ">Who won the toss?</div>
          <div class="tossGrid2">
            <button class="tossCard" data-pick="tossTeamA" id="btnTossA">
              <div class="tossLogo">A</div>
              <div class="tossName">Team A</div>
            </button>
            <button class="tossCard" data-pick="tossTeamB" id="btnTossB">
              <div class="tossLogo">B</div>
              <div class="tossName">Team B</div>
            </button>
          </div>

          <div class="tossQ" style="margin-top:14px">Winner of the toss elected to?</div>
          <div class="tossGrid2">
            <button class="tossCard" data-pick="bat">
              <div class="tossIcon">üèè</div>
              <div class="tossName">Bat</div>
            </button>
            <button class="tossCard" data-pick="bowl">
              <div class="tossIcon">üéØ</div>
              <div class="tossName">Bowl</div>
            </button>
          </div>

          <div class="tossHint">Tap the coin to flip</div>
          <div class="tossCoin" aria-hidden="true">ü™ô</div>

          <div class="tossBottom">
            <div class="tossHelp">Need help?</div>
            <div class="tossLets">Let's play</div>
          </div>
        </div>
      </section>
<section class="wizPane hidden" data-pane="xi">
  <div class="wizH">Playing XI</div>
  <div class="wizP">Team A aur Team B me se 15-15 players me se 11-11 select karo.</div>

  <div class="segTabs" style="margin-top:10px">
    <button type="button" class="segTab on" id="xiTabA">Team A</button>
    <button type="button" class="segTab" id="xiTabB">Team B</button>
  </div>

  <div class="muted small wizCount" id="xiOverallCount" style="margin-top:8px">Team A: 0/11 ‚Ä¢ Team B: 0/11</div>

  <div id="xiPaneA" class="xiPane" style="margin-top:10px">
    <div class="muted small wizCounter" id="xiACount2">0/11 selected</div>
    <div id="xiAList" class="wizList" style="margin-top:10px"></div>
  </div>

  <div id="xiPaneB" class="xiPane hidden" style="margin-top:10px">
    <div class="muted small wizCounter" id="xiBCount2">0/11 selected</div>
    <div id="xiBList" class="wizList" style="margin-top:10px"></div>
  </div>
</section>
<!-- 2nd innings UX: show an Innings Break screen before asking only opener + bowler -->
      <section class="wizPane hidden" data-pane="break">
        <div class="wizH">Innings Break</div>
        <div class="wizP">1st innings complete. Ab 2nd innings (chase) start karte hain.</div>
        <div class="wizBreakCard">
          <div class="wizBreakLine" id="breakSummary">1st Innings: -</div>
          <div class="wizBreakLine strong" id="breakTarget">Target: -</div>
          <div class="muted small" id="breakNote" style="margin-top:6px"></div>
        </div>
      </section>

      <section class="wizPane hidden" data-pane="opening">
        <div class="wizH">Opening Setup</div>
        <div class="wizP">2 openers + opening bowler select karo.</div>
        <div class="muted small" id="openBattingLabel"></div>
        <div class="muted small" id="openBowlingLabel" style="margin-top:2px"></div>
        <div class="wizRow"><label>Striker</label><select id="openStriker"></select></div>
        <div class="wizRow"><label>Non-striker</label><select id="openNon"></select></div>
        <div class="wizRow"><label>Opening Bowler</label><select id="openBowler"></select></div>
      </section>

      <section class="wizPane hidden" data-pane="ready">
        <div class="wizH">All Set ‚úÖ</div>
        <div class="wizP">Ab innings start kar do.</div>
        <div class="wizBigOk">üèè Ready for LIVE scoring</div>
      </section>
    </div>

    <div class="wizFooter">
      <button id="wizBack" class="wizBtn ghost">Back</button>
      <div class="wizDots" id="wizDots"></div>
      <button id="wizNext" class="wizBtn primary">Next</button>
    </div>
  </div>
</div>

<!-- Bottom Navigation (UI only) -->
<div class="bottomNav" role="navigation" aria-label="Primary">
  <div class="bnWrap">
    <a class="bnItem" href="index.html" data-nav="home"><div class="bnI">üè†</div><div class="bnT">Home</div></a>
    <a class="bnItem" href="live.html" data-nav="live"><div class="bnI">üì∫</div><div class="bnT">Live</div></a>
    <a class="bnItem" href="scorecard.html" data-nav="scorecard"><div class="bnI">üìä</div><div class="bnT">Scorecard</div></a>
    <a class="bnItem" href="schedule.html" data-nav="schedule"><div class="bnI">üìÖ</div><div class="bnT">Schedule</div></a>
    <a class="bnItem" href="admin.html" data-nav="admin"><div class="bnI">‚öôÔ∏è</div><div class="bnT">Admin</div></a>
  </div>
</div>
<script>
(()=>{
  try{
    const p=(location.pathname.split('/').pop()||'index.html');
    document.querySelectorAll('.bottomNav .bnItem').forEach(a=>{
      if((a.getAttribute('href')||'')===p) a.classList.add('active');
    });
  }catch(e){}
})();
</script>


</body></html>
